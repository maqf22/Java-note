
# 一、Linux常用命令

## 1. 命令格式

格式：命令 -选项参数 \[操作对象\]

## 2. 文件处理命令

### 1) ls

- 命令英文意思：list
- 执行权限描述：所有用户
- 执行功能描述：显示目录或文件
- 语法：`ls [-alh] [文件或目录]`
- 参数：
	- -a 显示所有文件，包括隐藏文件
	- -l 以长格式显示文件详细信息
	- -h 以适当的单位显示文件大小，与 -l 参数连用

### 2) cd

- 命令英文意思：change directory
- 执行权限描述：所有用户
- 执行功能描述：切换目录
- 语法：`cd [目录名]`

### 3) pwd

- 命令英文意思：print work directory
- 执行权限描述：所有用户
- 执行功能描述：显示当前工作目录

### 4) mkdir

- 命令英文意思：make directories
- 执行权限描述：所有用户
- 执行功能描述：创建新目录
- 语法：`mkdir [参数] <目录名>`
- 参数：
	- -p 递归创建

### 5) touch

- 命令所在路径：/bin/touch
- 执行权限描述：所有用户
- 执行功能描述：创建空文件
- 语法：`touch newFile`

### 6) cp

- 命令英文意思：copy
- 执行权限描述：所有用户
- 执行功能描述：复制文件或目录
- 语法：`cp [参数] [源文件或目录] [目标目录]`
- 参数：
	- -r 复制目录

### 7) mv

- 命令英文意思：move
- 执行权限描述：所有用户
- 执行功能描述：移动文件、改名
- 语法：`mv [参数] [源文件或目录] [目标目录]`

### 8) rm

- 命令英文意思：remove
- 执行权限描述：所有用户
- 执行功能描述：删除目录或文件
- 语法：`mv [参数] [目录或文件]`
- 参数：
	- -f 强制删除，不询问
	- -r 递归删除

### 9) cat

- 执行权限描述：所有用户
- 执行功能描述：显示文件内容
- 语法：`cat fileName`

### 10) more

- 执行权限描述：所有用户
- 执行功能描述：分页显示文件内容
- 语法：`more fileName`
- \<空格\> 或 f 翻页
- \<enter\>下一行
- q 或Q退出

### 11) ln

- 命令英文意思：link
- 执行权限描述：所有用户
- 执行功能描述：生成连接文件
- 语法：`ln [参数] [源文件] [目标文件]`
- 参数：
	- -s 生成软连接

## 3. 权限管理命令

### 1) chmod

- 命令英文意思：change the permissions mode of a file
- 执行权限描述：所有用户
- 执行功能描述：
- 语法：
	1. `chmod <[ugoa]>[+-=][rwx] <文件或目录>`
		- u -> user  文件所有者
		- g -> group  文件所属组
		- o -> other  其他用户
		- a -> all  所有用户
		- + -> 添加权限
		- - -> 删除权限
		- = -> 设置权
	2. `chmod <mode> <文件或目录>`
		- rwx rwx rwx -> 777
		- 111 111 111
		- r-x -> 5
		- 101
		- rw- -> 6
		- 110
		- -r- -> 2
		- 010
		- (rwx)
		- (421)
- 参数：
	- -R 递归设置

### 2) chown

- 命令英文意思：change file ownership
- 执行权限描述：所有用户
- 执行功能描述：改变文件或目录的所有者.所属组
- 语法：`chown <userName[.groupName]> fileName`
- 参数：
	- -R 递归设置

### 3) chgrp

- 命令英文意思：change file group ownership
- 执行权限描述：所有用户
- 执行功能描述：改变文件或目录的所属组
- 语法：`chgrp <groupName> fileName`

## 4. 文件搜索命令

### 1) which

- 执行权限描述：所有用户
- 执行功能描述：查看系统命令的所在目录
- 语法：`which <command>`

### 2) find

- 执行权限描述：所有用户
- 执行功能描述：文件搜索
- 语法：`find [搜索范围] [匹配文件]`
- EX：
	1. `find /etc -name init`  在etc中查找文件名为init的文件或目录，其中可以使通配符*或?
	2. `find / -size +204800`  在根目录下查找大于100MB的文件
	3. `find /home -user maqf`  在home目录下查找所有者为maqf的文件
	4. `find /etc -cmin -5`  在etc下查找5分钟内修改过属性的文件或目录
		- `-amin` 访问时间access
		- `-cmin`文件属性change
		- `-mmin`文件内容modify
	5. `find /etc -size +163840 -a -size -204800`  在etc下查找大于80MB并且小于100MB的文件

### 3) grep

- 执行权限描述：所有用户
- 执行功能描述：在文件中搜索字符串匹配的行并输出
- 语法：`grep -iv [指定字符串] [文件]`
- 参数：
	- -i 不区分大小写
	- -v 排队指定字符串


## 5. 帮助命令

### 1) man

- 命令英文意思： manual
- 执行权限描述：所有用户
- 执行功能描述：获取帮助信息
- 语法：`man <command>`

> https://www.linuxcool.com/


## 6. 压缩/解压缩/打包命令

### 1) gzip

- 命令英文意思： GNU zip
- 执行权限描述：所有用户
- 执行功能描述：压文件（压缩格式.gz）
- 语法：`gzip <fileName>`
- 注：*只参对文件进行操作，且执行后不保留源文件*

### 2) gunzip

- 命令英文意思： GNU unzip
- 执行权限描述：所有用户
- 执行功能描述：解压缩.gz格式的压缩文件
- 语法：`gunzip <fileName.gz>`

### 3) bzip2

- 执行权限描述：所有用户
- 执行功能描述：压缩文件（压缩格式.bz2）
- 语法：`bzip2 [选项] <fileName>`
- 参数：
	- -k：保留源文件

### 4) bunzip2

- 执行权限描述：所有用户
- 执行功能描述：解压缩.bz2格式的压缩文件
- 语法：`bunzip2 [选项] <fileName.bz2>`
- 参数：
	- -k：保留源文件

### 5) tar

- 执行权限描述：所有用户
- 执行功能描述：打/解包目录
- 语法：`tar <选项> <目标文件名> <源文件>`
- 参数：
	- -c  打包
	- -x  解包
	- -v  显示详细信息
	- -f  指定文件名 ***
	- -z  打包同时压缩.gz
	- -j  打包同时压缩.bz2


## 7. 网络通信命令

### 1) ping

- 执行权限描述：所有用户
- 执行功能描述：测试网络连接
- 语法：`ping <ip address>`
- 参数：
	- -c  指定发送次数
	- -s  指定数据包大小

### 2) ifconfig

- 命令英文意思：interface configure
- 执行权限描述：root
- 执行功能描述：查看和设置网卡信息
- 语法：
	1. `ifconfig <Enter>`  查看网络
	2. `ifconfig eth0 <ip address>`  设置eth0网卡的IP地址


## 8. 关机命令

### 1) shutdown 

- 执行权限描述：root
- 执行功能描述：关机
- 语法：`shutdown -h now`
- 等价于：`init 0`

### 2) reboot

- 执行权限描述：root
- 执行功能描述：重启
- 语法：`reboot <Enter>`
- 等价于：`init 6`


# 二、VIM

## 1. 三种工作模式

- 命令模式：在命令模式下可以对当标进行快速的定位、复制、粘贴等操作
- 编辑模式：在编辑模式下可以对本文内容进行编辑
- 末行模式：在末行模式下可以对文本内容进行保存、查找等附加功能

## 2. 定位命令

命令 | 作用 | 命令 | 作用
:- | :- | :- | :-
:set nu | 设置行号 | :set nonu | 取消行号
gg | 定位到第一行 | G | 定位到最后一行
ngg/nG | 定位到第n行 | :n | 定位到第n行
$ | 定位到末行 | 0 | 定位到行首
h | 左 | l | 右
J | 下 | k | 上

## 3. 插入命令

命令 | 作用 | 命令 | 作用
:- | :- | :- | :-
a | 当前光标所在字符后 | A | 当前光标所在行末
i | 当前光标所在字符前 | I | 当前光标所在行首
o | 当前所在行下插入行 | O | 当前所在行上插入行
s | 替换当前光标所在处 | S | 替换当前当标所在行

## 4. 删除命令

命令 | 作用 | 命令 | 作用
:- | :- | :- | :-
x | 删除光标所在处字符 | nx | 删除光标所在处后n个字符
dd | 删除当前当标所在行 | dG | 删除光标所在处到文件末尾所有内容
D | 删除当前光标所在处到行末 | :n,nd | 删除指定范围的行

## 5. 复制和剪切命令

命令 | 作用
:- | :-
yy | 复制当前光标所在行
nyy | 复制当前行以下n行（包含当前行）
dd | 剪切当前光标所在行
ndd | 剪切当前行以下n行（包括当前行）
v | 可视，用于复制或剪切删除时选取操作，配合y/d/p
p/P | 粘贴在当前行下方/上方

## 6.  替换和撤销命令

命令 | 作用
:- | :-
r | 取代光标所在处字符
R | 从光标所在处开始替换字符，知道ESC键结束
u | 取消上一步操作

## 7. 搜索和替换命令

命令 | 作用
:- | :-
/stirng | 搜索指定字符串，搜索时忽略大小写：set ic
n/N | 从当前位置搜索指定字符串的下一个/上一个出现的位置
:%s/old/new/g | 全文替换new到old字符串
:n1,n2s/old/new/g | 在一定范围内替换new到old字符串

## 8. 保存和退出命令

命令 | 作用
:- | :-
:w | 保存修改
:w filename | 另存为新的指定文件
:wq | 保存修改并退出
ZZ | vim中保存退出指令
:q! | 强制不保存退出
:wq! | 针对只读文件，强制保存退出（文件所有者及root用户可用）

## 9. 输出重定向

- 把指定的内容重新定向的指定的文件中
	- `>`  覆盖方式的写入
	- `>>`  追加方式的写入

## 10. vim的个性化配置

> 编辑当前用户字目中的.vimrc配置文件

```vimrc
set nu
set ts=4
set autoindent
```

> history 用于查历史指令
> ctrl + r 模糊搜索历史指令


# 三、网络命令

## 1. IP地址配置

- 使用命令配置IP地址

`ifconfig eth0 xxxx.xxxx.xxxx.xxxx`  为eth0网卡设置IP地址（临时生效）

## 2. 网卡配置文件

- `/etc/sysconfig/network-scripts/ifcfg-eth0`  网卡信息配置文件
- `/etc/sysconfig/network`  主机名配置文件，永久生效，需重启网卡
	- HOSTNAME=localhost.localdomain
- `hostname <主机名>`  临时设置主机名，可直接通过hostname命令查看当前主机名
- `/etc/resolv.conf`  DNS配置文件，也可通过`setup`命令配置DNS
	- nameserver 114.114.114.114

## 3. 常用命令

命令 | 功能
:- | :-
ifconfig | 查看网卡信息
ifup eth0 | 快速启动eth0网卡
ifdown eth0 | 快速关闭eth0网卡
netstat -an | 查看所有网连接
netstat -tlun | 查看tcp和udp协议监听端口
ping xxxx.xxxx.xxxx.xxxx | 检查网络畅通性
setup | 使用图形界面配置网络信息


# 四、Linux软件包管理

## 1. 源码包

- 优点：开源自由定制，效率更高
- 缺点：编译时长，一旦报错，很难解决

## 2. 二进制包

- 优点：安装速度快（简易）
- 缺点：自定义差

## 3. 挂载命令

### 1. 挂载U盘

1. 将U盘插入本机并识别
2. 将被本机识别的U盘连接到虚拟机，虚拟机-可以动设备-你的U盘
3. `fdisk -l` 查看当前系统中的文件系统列表（查看磁盘分区）
4. `mkdir /mnt/usbDisk` 创建一个新的挂载点
5. `mount /dev/sdXX /mnt/usbDisk` 将U盘设备挂载到新建的挂载点上
6. 进入挂载点对U盘中文件进行操作
7. 退出U盘挂载目录
8. `umount usbDisk`或`umount /dev/sdXX` 卸载U盘
9. 在虚拟机中设置断开U盘连接，将U盘还给windows
10. 当windows识别U盘后，可在windows中对U盘进行各种操作

## 4. rmp包安装

- 安装

命令 | 功能
:- | :-
rpm -ivh 软件包 | 安装软件
rpm -Uvh 包全名 | 升级软件

> 其中参数：i 安装，v 显示相关信息，h 以进号显示进度条，U 升级

www.rpmfind.net rpm依赖包查找

- 卸载

命令 | 功能
:- | :-
rpm -e 软件名 | 卸载软件包（--nodeps不检查依赖关系）

- 查询

命令 | 功能
:- | :-
rpm -q 软件名 | 查询软件包是否被安装
rpm -qa | 查询所有已安装的软件包
rpm -qi 软件名 | 查询包信息
rpm -qip 软件包 | 查询没有安装的包信息
rpm -ql 软件包 | 查询包中文件已安装的位置
rpm -qlp 软件包 | 查询没做安装的包，打算安装位置
rmp -qf | 系统文件名查询系统文件属于哪个包

> service xxx start/stop

## 5. yum命令

命令 | 功能
:- | :-
yum -y install 软件包 | 安装软件
yum -y remove 软件包 | 卸载软件
yum -y update 软件包 | 升级软件包
yum list | 查询软件包

**使用光盘作为yum源**

- 进入yum源配置文件存放目录：`/etc/yum.repos.d/`
- 将除CentOS-Media.repo以外的所有文件删除或改名（推荐改名），目的让其他yum源失效
- 将光驱挂到Linux系统当中，记住挂在路径
- 编辑CentOS-Media.repo配置文件，并修改一下内容

```repo
baseurl=file:///mnt/cdrom/  # 修改为光驱挂在路径
enabled=1  # 设置yum源文件生效
gpgcheck=0  # 设置rpm验证不生效
```

- 保存退出后，可使用`yum list`命令查看yum源设置是否成功
- 设置成功后EX：`yum -y install gcc`和`yum -y install gcc-c++`

## 6. 源码包安装

1. 解压、解包
2. 进入源码包目录
3. 查看安装文件：INSTALL和README
4. 编译前的准备：./configure（安装前的配置）
5. 检测系统环境，生成MakeFile文件
6. 定义软件选项
7. 编译make
8. 编译安装make install
- 报错：
	- 安装过程是否停止
	- 注意error、warning、no等错误报警
	- make clean


# 五、Linux进程管理

## 1. 进程管理三个主要任务

1. 判断服务器状态
2. 查看所有正在运行的进程
3. 强制结束进程

## 2. 查看进程

- 查看当前系统的所有进程：`ps aux`
	- -a：显示前台所有进程
	- -u：显示用户名
	- -x：显示后台进程
		- user：用户名
		- pid：进程ID（PID 1 init系统启动的第一个进程）
		- %CPU：cpu占用百分比
		- %MEM：内存占用百分比
		- VSZ：虚拟内存占用量，单位KB
		- RSS：固定内存占用量
		- tty：登录终瑞（tty1-7其中1-6为本地字符终端7为图形终端，或者pty/pts/0-5是伪终端）
		- stat: 状态
			- S：睡眠
			- D：不可唤醒
			- R：正在运行
			- T：停止
			- **Z：僵死**
			- W：进入内存交换
			- **X：死掉的进程**
			- \<：高优先级的进程
			- N：低优先级的进程
			- L：被缩进内存的进程
			- s：包含子进程
			- +：位于后台的进程
			- l：具有多线程的进程
		- start：进程的触发时间
		- time：占用cpu时间
		- command：进程命令

- 查看进程树`pstree`

- 动态查看进程硬件占率top
	- M：按照内存使用情况进行排序
		- P：按照cpu情况进行排序
		- q：退出

## 3. 进程管理




























