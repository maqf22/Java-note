
# 一、集合概述

提供依存存储空间可变的存存储类型，存储数据容量可以发生该表。

**Collection**是单列集合，对应的双列集合是Map集合。
- 单列集合**Collection**
	- **List**可重复：*ArrayList*、*LinkedList* ……
	- **Set**不可重复：*HashSet*、*TreeSet* ……
- 双列集合**Map**: *HashMap* ……


# 二、ArrayList

`ArrayList<E>`
- 可调整大小的数组实现
- `<E>`：是一种特殊的数据类型，泛形-（必须是引用数据类型）
	- `ArrayList<String>`或`ArrayList<Student>`

## 1. ArrayList构造方法和添加方法

方法名 | 说明
--- | ---
public ArrayList() | 创建一个空白的集全对象
public boolean add(E e) | 将指定的元素最佳到此集合的末尾
public void add(int idnex, E element) | 在此集合中指定位置插入指定的元素

```java
package com.maqf.demo01;

import java.util.ArrayList;

public class Demo01 {
    public static void main(String[] args) {
        // ArrayList<String> list  = new ArrayList<String>(); // JDK < 1.7
        // 实例化一个空的集合
        ArrayList<String> list = new ArrayList<>();

        // add(E e)方法的功能是将元素添加到集合的末尾
        list.add("A");
        list.add("B");
        list.add("C");
        list.add("D");
        // 在指定的索引位置添加元素
        // list.add(22, "Z") // IndexOutOfBoundsException
        list.add(4, "E"); // 如果添加到末尾，索引的参数可以省略不写
        // 索引的取值范围在0开始集合的元素个数之内

        System.out.println(list); // => [A, B, C, D, E]
    }
}
```

## 2. ArrayList集合的常用方法

方法名 | 说明
--- | ---
public boolean remove(object o) | 删除指定的元素，返回删除是否成功
public E remove(int index) | 删除指定索引的元素，返回删除的元素
public E set(int index, E element) | 修改指定索引处元素，返回修改的元素
public E get(int index) | 返回指定索引的元素
public int size() | 返回集合中元素的个数

```java
package com.maqf.demo01;

import java.util.ArrayList;

public class Demo02 {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        list.add("Jack");
        list.add("Rose");
        list.add("Ben");
        list.add("Lily");
        // remove()
        System.out.println(list.remove("Lily")); // 删除成功返回true
        System.out.println(list.remove(2)); // 返回被删除的元素值
        // set()
        System.out.println(list.set(1, "Adar")); // 返回修改前的元素
        // get()
        System.out.println(list.get(0));
        // size()
        System.out.println(list.size());

        System.out.println(list);
    }
}
```

## 3. ArrayList的遍历

```java
package com.maqf.demo01;

import java.util.ArrayList;
import java.util.Iterator;

public class Demo03 {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        list.add("A");
        list.add("B");
        list.add("C");
        list.add("D");
        
        // 集合遍历
        // 方法一：
        for (int i = 0; i < list.size(); i++) {
            System.out.println(list.get(i));
        }
        // 方法二：增强for
        for (String c : list) {
            System.out.println(c);
        }
        // 方法三：迭代器
        Iterator<String> it = list.iterator();
        while(it.hasNext()) {
            System.out.println(it.next());
        }
        // 方法四：forEach
        // list.stream().forEach(System.out::println);
        list.forEach(System.out::println);
    }
}
```

```java
package com.maqf.demo02;

import java.util.ArrayList;

public class Demo01 {
    public static void main(String[] args) {
        ArrayList<Student> stuList = new ArrayList<>();
        stuList.add(new Student("Jack", "male", 18));
        stuList.add(new Student("Rose", "female", 16));
        stuList.add(new Student("Ben", "male", 19));

        for (Student stu : stuList) {
            System.out.printf("%-10s%-10s%-6d\n", 
                    stu.getName(), stu.getGender(), stu.getAge());
        }
    }
}
```


# 三、Collection

- Collection是单列集合的顶层接口，表示一组对象，这些对象也称为Collection的元素
- JDK不提供子接口的任何实现，但提供更具体的子接口（如Set和List等）实现接口

```java
// 多态
Collection<String> c = new ArrayList<>();
c.add("Jack");
System.out.println(c);
```

## 1. Collection集合的常用方法

方法名 | 说明
:- | :-
boolean add(E e) | 添加元素
boolean remove(Object o) | 从集合上移除指定的元素
void clear() | 清空集合中的元素
boolean contains(Object o) | 判断集合中是否存在指定的元素
boolean isEmpty() | 判断集合是否为空
int size() | 集合的长度，也就是集合中元素的个数

```java
package com.maqf.demo04;

import java.util.ArrayList;
import java.util.Collection;

public class Demo01 {
    public static void main(String[] args) {
        Collection<String> c = new ArrayList<>();
        c.add("Jack");
        c.add("Rose");
        c.remove("Rose"); // 删除成功返回true，否则返回false
        c.clear(); // 清空集合
        c.isEmpty(); // 判断集合是否为空
        c.contains("Jack"); // 判断集合是否存在指定元素
        c.size(); // 集合长度
        System.out.println(c);
    }
}
```

## 2. Collection集合的遍历

- Iterator: 迭代器，集全的专用遍历方式
	- Iterator\<E\> iterator()：返回此集合中元素的迭代器，通过集合的iterator()方法得到
	- 迭代器是通过集合iterator()方法得到的，所以我们说他是依赖于集合而存在的

- Iterator中常用的方法

方法名 | 说明
:- | :-
\<E\> next() | 返回迭代器中的下一个元素
boolean hasNext() | 如果有迭代具有更多元素，则返回true

```java
package com.maqf.demo04;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class Demo04 {
    public static void main(String[] args) {
        Collection<String> c = new ArrayList<>();
        c.add("Rose");
        c.add("Jack");
        
        // 增强for
        for (String item : c) {
            System.out.println(item);
        }

        // 迭代器遍历
        Iterator<String> it = c.iterator();
        while(it.hasNext()) {
            System.out.println(it.next());
        }
    }
}
```

# 四、List

- 有序集合（也称之为序列），用户可以精确的控制列表中的每个元素的插入位置。用户可以通过整数索引访问元素，并搜列表中的元素
- 与Set集合不同，列表通常允许重复的元素
- List集合的特点
	- 有序，存储和读取的元素顺序一致
	- 可重复：存储的元素可以重复


```java
package com.maqf.demo04;

import java.util.ArrayList;
import java.util.List;

public class Demo05 {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("Rose");
        list.add("Jack");
        System.out.println(list);
    }
}
```

## 1. List集合特有方法

方法名 | 说明
:- | :-
void add(int index, E element) | 在集合中指定的位置插入指定的元素
E remove(int index) | 删除指定索引出的元素，返回被删除的元素
E set(int index, E element) | 修改指定索引出的元素，返回被修改的元素
E get(int index) | 返回指定索引出的元素

```java
package com.maqf.demo04;

import java.util.ArrayList;
import java.util.List;

public class Demo06 {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("Rose");
        list.add("Jack");
        list.add(1,"Ben");

        list.remove(1);
        list.set(0, "Kitty");
        list.get(0);

        System.out.println(list);
    }
}
```

## 2. List集合的遍历

```java
package com.maqf.demo04;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class Demo07 {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("Rose");
        list.add("Jack");
        list.add(1, "Ben");

        for (int i = 0; i < list.size(); i++) {
            System.out.println(list.get(i));
        }

        for (String name : list) {
            System.out.println(name);
        }

        Iterator<String> it = list.iterator();
        while (it.hasNext()) {
            System.out.println(it.next());
        }
        
        list.stream().forEach(System.out::println);
        list.forEach(System.out::println);
    }
}
```

## 3. 并发修改异常

ConcurrentModificationException

```java
package com.maqf.demo04;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class Demo08 {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("Rose");
        list.add("Jack");
        list.add(1, "Ben");

        // 在创建迭代器的时候，迭代器中会有一个成员用来存储预期迭代的元素个数
        // 这个成员在每次集合被迭代的时候都会和集合的原始数据个数进行对比
        // 如果发现不一致，就会引发ConcurrentModificationException（并发性修改异常）
        Iterator<String> it = list.iterator();
        while(it.hasNext()) {
            String next = it.next();
            if ("Ben".equals(next)) {
                System.out.println("Ben has be found");
                list.add("End"); // ConcurrentModificationException
            }
        }
        // 解决方案，使用普通的for循环集合
    }
}
```





